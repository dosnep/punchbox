# Alert if some metadata is detected

name: Archiving success

type: any

index: mytenant-archive-*

realert:
  minutes: 15

include:
  - num_hits
  - num_matches

alert:
- command
- post

command: 
  - "/bin/echo"
  - "alert: Archiving ended with success (At least one metadata found)"

post:
http_post_url: {{ livedemo_api_url }}
http_post_all_values: True
http_post_static_payload:
  validation:
    id: {{ validation_id }}
  rule:
    name: Archiving
    type: success
    result: 1
    description: Archiving ended with success (At least one metadata found)
  host:
    user: {{ user }}
    sysname: {{ sysname }}
    release: {{ release }}
    machine: {{ machine }}
  vagrant:
    config: {{ vagrant_config }}
    os: {{ vagrant_os }}
  punchplatform:
    branch: {{ branch }}
    commit: {{ commit }}
    date: {{ commit_date }}